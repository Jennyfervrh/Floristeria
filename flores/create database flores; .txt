CREATE SCHEMA IF NOT EXISTS flores DEFAULT CHARACTER SET utf8 ;
USE flores ;


CREATE TABLE IF NOT EXISTS flores.CLIENTE (
  idCLIENTE INT NOT NULL,
  CLIENTE_NOMBRE VARCHAR(45) NOT NULL,
  CLIENTE_APE_PAT VARCHAR(45) NOT NULL,
  CLIENTE_APE_MAT VARCHAR(45) NOT NULL,
  CLIENTE_CORREO VARCHAR(45) NOT NULL,
  SEXO TINYINT(1) NOT NULL,
  PRIMARY KEY (idCLIENTE));

CREATE TABLE IF NOT EXISTS flores.PROVEEDORES (
  idPROVEEDORES INT NOT NULL,
  PROVEEDORES_NOMBRE VARCHAR(45) NOT NULL,
  PROVEEDORES_APE_PAT VARCHAR(45) NOT NULL,
  PROVEEDORES_COMPAÑIA VARCHAR(45) NOT NULL,
  PROVEEDORES_FECHA VARCHAR(45) NOT NULL,
  PROVEEDORES_MONTO VARCHAR(45) NOT NULL,
  PRIMARY KEY (idPROVEEDORES));

CREATE TABLE IF NOT EXISTS flores.CANT_PRODUCTO (
  idCANT_PRODUCTO INT NOT NULL,
  CANT_PRODUCTO_NOMBRE VARCHAR(45) NOT NULL,
  CANT_PRODUCTO_TIPOl VARCHAR(45) NOT NULL,
  CANT_PRODUCTO_PRECIO VARCHAR(45) NOT NULL,
  STOCK_idSTOCK INT NOT NULL,
  PROVEEDORES_idPROVEEDORES INT NOT NULL,
  PRIMARY KEY (idCANT_PRODUCTO, STOCK_idSTOCK, PROVEEDORES_idPROVEEDORES),
  INDEX fk_CANT_PRODUCTO_PROVEEDORES1_idx (PROVEEDORES_idPROVEEDORES ASC) VISIBLE,
  CONSTRAINT fk_CANT_PRODUCTO_PROVEEDORES1
    FOREIGN KEY (PROVEEDORES_idPROVEEDORES)
    REFERENCES flores.PROVEEDORES (idPROVEEDORES)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE IF NOT EXISTS flores.CAJERO (
  idCAJERO INT NOT NULL,
  CAJERO_NOMBRE VARCHAR(45) NOT NULL,
  CAJERO_APE_PAT VARCHAR(45) NOT NULL,
  PRIMARY KEY (idCAJERO));

CREATE TABLE IF NOT EXISTS flores.VENTA (
  idVENTA INT NOT NULL,
  VENTA_MONTO VARCHAR(45) NOT NULL,
  CLIENTE_idCLIENTE INT NOT NULL,
  CAJERO_idCAJERO INT NOT NULL,
  PRIMARY KEY (idVENTA, CLIENTE_idCLIENTE, CAJERO_idCAJERO),
  INDEX fk_VENTA_CLIENTE_idx (CLIENTE_idCLIENTE ASC) VISIBLE,
  INDEX fk_VENTA_CAJERO1_idx (CAJERO_idCAJERO ASC) VISIBLE,
  CONSTRAINT fk_VENTA_CLIENTE
    FOREIGN KEY (CLIENTE_idCLIENTE)
    REFERENCES flores.CLIENTE (idCLIENTE)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_VENTA_CAJERO1
    FOREIGN KEY (CAJERO_idCAJERO)
    REFERENCES flores.CAJERO (idCAJERO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE IF NOT EXISTS flores.VENTA_has_CANT_PRODUCTO (
  VENTA_idVENTA INT NOT NULL,
  VENTA_CLIENTE_idCLIENTE INT NOT NULL,
  VENTA_CAJERO_idCAJERO INT NOT NULL,
  CANT_PRODUCTO_idCANT_PRODUCTO INT NOT NULL,
  CANT_PRODUCTO_STOCK_idSTOCK INT NOT NULL,
  CANT_PRODUCTO_PROVEEDORES_idPROVEEDORES INT NOT NULL,
  PRIMARY KEY (VENTA_idVENTA, VENTA_CLIENTE_idCLIENTE, VENTA_CAJERO_idCAJERO, CANT_PRODUCTO_idCANT_PRODUCTO, CANT_PRODUCTO_STOCK_idSTOCK, CANT_PRODUCTO_PROVEEDORES_idPROVEEDORES),
  INDEX fk_VENTA_has_CANT_PRODUCTO_CANT_PRODUCTO1_idx (CANT_PRODUCTO_idCANT_PRODUCTO ASC, CANT_PRODUCTO_STOCK_idSTOCK ASC, CANT_PRODUCTO_PROVEEDORES_idPROVEEDORES ASC) VISIBLE,
  INDEX fk_VENTA_has_CANT_PRODUCTO_VENTA1_idx (VENTA_idVENTA ASC, VENTA_CLIENTE_idCLIENTE ASC, VENTA_CAJERO_idCAJERO ASC) VISIBLE,
  CONSTRAINT fk_VENTA_has_CANT_PRODUCTO_VENTA1
    FOREIGN KEY (VENTA_idVENTA , VENTA_CLIENTE_idCLIENTE , VENTA_CAJERO_idCAJERO)
    REFERENCES flores.VENTA (idVENTA , CLIENTE_idCLIENTE , CAJERO_idCAJERO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_VENTA_has_CANT_PRODUCTO_CANT_PRODUCTO1
    FOREIGN KEY (CANT_PRODUCTO_idCANT_PRODUCTO , CANT_PRODUCTO_STOCK_idSTOCK , CANT_PRODUCTO_PROVEEDORES_idPROVEEDORES)
    REFERENCES flores.CANT_PRODUCTO (idCANT_PRODUCTO , STOCK_idSTOCK , PROVEEDORES_idPROVEEDORES)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
